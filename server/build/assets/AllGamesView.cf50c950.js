var S=Object.defineProperty;var P=Object.getOwnPropertySymbols;var V=Object.prototype.hasOwnProperty,k=Object.prototype.propertyIsEnumerable;var D=(a,e,l)=>e in a?S(a,e,{enumerable:!0,configurable:!0,writable:!0,value:l}):a[e]=l,x=(a,e)=>{for(var l in e||(e={}))V.call(e,l)&&D(a,l,e[l]);if(P)for(var l of P(e))k.call(e,l)&&D(a,l,e[l]);return a};import{G as A}from"./GameCard.efc1d91f.js";import{m as y,x as M,_ as w,o as r,a as n,e as t,F as v,b,t as G,y as U,z as B,r as h,c as g,d as C,g as f,A as d,B as u,f as c,w as F,C as j,h as E}from"./index.a60cd40e.js";const I={computed:y("pagesCountModule",["getTotalPages"]),methods:M("pagesCountModule",["updateCurrentPage"])},N={class:"md:w-112 w-full flex justify-between items-center inner_shadow_custom p-3 rounded-xl text-white"},T=t("div",null,[t("img",{src:U,alt:"arrow_left"})],-1),L={class:"flex space-x-3"},q=["onClick"],H=t("div",null,[t("img",{src:B,alt:"arrow_right"})],-1);function R(a,e,l,_,s,p){return r(),n("div",N,[T,t("div",L,[(r(!0),n(v,null,b(a.getTotalPages,i=>(r(),n("div",{class:"md:px-4 md:py-2 px-3 py-1 text-center rounded-full bg-custom-red hover:cursor-pointer hover:opacity-80 duration-200",onClick:o=>a.updateCurrentPage(i)},G(i),9,q))),256))]),H])}var W=w(I,[["render",R]]);const X={components:{GameCard:A,PagesSwitcher:W},props:["allGames","switchPages"]},z={class:"flex flex-col justify-between"},J={class:"grid xl:grid-cols-4 lg:grid-cols-3 grid-cols-2 gap-y-4 gap-x-4 md:gap-x-0 grid_games_cards justify-items-center"},K={key:0,class:"flex justify-center"};function O(a,e,l,_,s,p){const i=h("GameCard"),o=h("PagesSwitcher");return r(),n("div",z,[t("div",J,[(r(!0),n(v,null,b(l.allGames,m=>(r(),g(i,{class:"xl:w-52 lg:w-44","game-title":m.gameTitle,"game-poster":m.poster,"game-price":m.price,key:m.id},null,8,["game-title","game-poster","game-price"]))),128))]),l.switchPages?(r(),n("div",K,[C(o,{class:"mt-10 mb-5"})])):f("",!0)])}var Q=w(X,[["render",O],["__scopeId","data-v-6e31f77a"]]);const Y={emits:["searchGamesEmit"],props:["allCategories"],data(){return{searchData:{price:"",genre:"",platform:""}}},methods:{searchFilteredGames(){this.$emit("searchGamesEmit",this.searchData)}}},Z={class:"text-xl inner_shadow_custom p-4 rounded-xl h-full"},ee=t("h1",{class:"text-2xl mt-3 font-bold mb-2"},"Filters",-1),te=t("hr",{class:"w-full h-0.5 mb-3 bg-custom-red border-none"},null,-1),se={class:"flex flex-col"},ae=t("h1",{class:"text-2xl mt-3 font-bold mb-2"},"Price",-1),oe=t("hr",{class:"w-1/3 h-0.5 mb-3 bg-custom-red border-none"},null,-1),le=c(" Under 20$ "),re=c(" From 20$ to 40$ "),ne=c(" From 40$ to 60$ "),ce=c(" More than 60$ "),ie={class:"flex flex-col"},me=t("h1",{class:"text-2xl mt-3 font-bold mb-2"},"Genres",-1),de=t("hr",{class:"w-1/3 h-0.5 mb-3 bg-custom-red border-none"},null,-1),ue={class:"flex flex-col h-32 overflow-auto"},pe=["onUpdate:modelValue","value"],he={class:"flex flex-col"},_e=t("h1",{class:"text-2xl mt-3 font-bold mb-2"},"Platform",-1),ge=t("hr",{class:"w-1/3 h-0.5 mb-3 bg-custom-red border-none"},null,-1),fe=c(" PlayStation "),we=c(" Xbox "),xe=c(" Windows "),ye={class:"flex justify-center mt-5"},ve=c("Search");function be(a,e,l,_,s,p){const i=h("CustomBtn");return r(),n("div",Z,[ee,te,t("form",{onSubmit:e[7]||(e[7]=j((...o)=>p.searchFilteredGames&&p.searchFilteredGames(...o),["prevent"])),class:"mt-5"},[t("div",se,[ae,oe,t("label",null,[d(t("input",{type:"radio",class:"h-4 w-4 accent-custom-red",name:"price","onUpdate:modelValue":e[0]||(e[0]=o=>s.searchData.price=o),value:"0-20"},null,512),[[u,s.searchData.price]]),le]),t("label",null,[d(t("input",{type:"radio",class:"h-4 w-4 accent-custom-red",name:"price","onUpdate:modelValue":e[1]||(e[1]=o=>s.searchData.price=o),value:"20-40"},null,512),[[u,s.searchData.price]]),re]),t("label",null,[d(t("input",{type:"radio",class:"h-4 w-4 accent-custom-red",name:"price","onUpdate:modelValue":e[2]||(e[2]=o=>s.searchData.price=o),value:"40-60"},null,512),[[u,s.searchData.price]]),ne]),t("label",null,[d(t("input",{type:"radio",class:"h-4 w-4 accent-custom-red",name:"price","onUpdate:modelValue":e[3]||(e[3]=o=>s.searchData.price=o),value:"60-999"},null,512),[[u,s.searchData.price]]),ce])]),t("div",ie,[me,de,t("div",ue,[(r(!0),n(v,null,b(l.allCategories,o=>(r(),n("label",null,[d(t("input",{type:"radio",class:"h-4 w-4 accent-custom-red",name:"genre","onUpdate:modelValue":m=>s.searchData.genre=m,value:o.genreName},null,8,pe),[[u,s.searchData.genre]]),c(" "+G(o.genreName),1)]))),256))])]),t("div",he,[_e,ge,t("label",null,[d(t("input",{type:"radio",class:"h-4 w-4 accent-custom-red",name:"platform","onUpdate:modelValue":e[4]||(e[4]=o=>s.searchData.platform=o),value:"PlayStation"},null,512),[[u,s.searchData.platform]]),fe]),t("label",null,[d(t("input",{type:"radio",class:"h-4 w-4 accent-custom-red",name:"platform","onUpdate:modelValue":e[5]||(e[5]=o=>s.searchData.platform=o),value:"Xbox"},null,512),[[u,s.searchData.platform]]),we]),t("label",null,[d(t("input",{type:"radio",class:"h-4 w-4 accent-custom-red",name:"platform","onUpdate:modelValue":e[6]||(e[6]=o=>s.searchData.platform=o),value:"Windows"},null,512),[[u,s.searchData.platform]]),xe])]),t("div",ye,[C(i,{type:"submit",class:"bg-custom-red px-7 text-white"},{default:F(()=>[ve]),_:1})])],32)])}var Ge=w(Y,[["render",be]]);const Ce={name:"AllGamesView",components:{AllGamesComponent:Q,FilterComponent:Ge},data(){return{allGames:null,categories:null,filteredGames:null}},computed:x(x({},y("pagesCountModule",["getCurrentPage"])),y("isLoadingModule",["getLoadingStatus"])),methods:{async getGames(a){try{const{count:e,rows:l,limit:_}=(await this.$API.mainServices.getAllGames(a)).data;this.allGames=l,this.$store.commit("pagesCountModule/updateTotalPages",Math.ceil(e/_)),this.$router.push({query:{page:a}})}catch(e){this.$store.commit("alertInfoModule/updateError",e)}},async searchByFilter(a){try{const e={price:a.price,genre:a.genre,platform:a.platform};this.$router.push({query:e}),this.filteredGames=(await this.$API.mainServices.searchByFilter(e)).data}catch(e){this.$store.commit("alertInfoModule/updateError",e)}}},watch:{async getCurrentPage(a){await this.getGames(a)}},async mounted(){try{await this.getGames(this.$route.query.page),this.categories=(await this.$API.mainServices.getAllCategories()).data}catch(a){this.$store.commit("alertInfoModule/updateError",a)}},beforeRouteUpdate(a,e){this.filteredGames=null}},$e={key:0,class:"rounded p-3 custom_shadow_out"},Pe={class:"flex md:justify-between justify-center relative"},De={key:2},Fe=t("h1",{class:"text-4xl absolute left-1/3 top-1/3"},"Not found",-1),Se=[Fe],Ve={key:1,class:"flex justify-center m-5"},ke=t("img",{src:E,class:"animate-spin",alt:"spinner"},null,-1),Ae=[ke];function Me(a,e,l,_,s,p){var $;const i=h("ParagraphHeader"),o=h("AllGamesComponent"),m=h("FilterComponent");return a.getLoadingStatus?(r(),n("div",Ve,Ae)):(r(),n("div",$e,[C(i,null,{default:F(()=>[c(G(s.filteredGames?"Found games":"All games"),1)]),_:1}),t("div",Pe,[s.filteredGames?(r(),g(o,{key:0,class:"xl:w-4/5 md:w-4/6 mt-3 mb-3","all-games":s.filteredGames,"switch-pages":!1},null,8,["all-games"])):s.allGames?(r(),g(o,{key:1,class:"xl:w-4/5 md:w-4/6 mt-3 mb-3","all-games":s.allGames,"switch-pages":!0},null,8,["all-games"])):f("",!0),(($=s.filteredGames)==null?void 0:$.length)==0?(r(),n("div",De,Se)):f("",!0),s.categories?(r(),g(m,{key:3,class:"xl:w-1/5 md:w-2/6 mt-3 mb-3 ml-3 hidden md:block","all-categories":s.categories,onSearchGamesEmit:p.searchByFilter},null,8,["all-categories","onSearchGamesEmit"])):f("",!0)])]))}var Ee=w(Ce,[["render",Me]]);export{Ee as default};
